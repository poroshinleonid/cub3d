# https://www.math.utah.edu/~treiberg/Perspect/Perspect.htm
NAME = fdf

CFILES = src/fdf.c \
src/reader.c \
src/reader2.c \
src/reader3.c \
src/reader4.c \
src/debug.c \
src/utils.c \
src/geometry.c \
src/geometry2.c \
src/draw.c \
src/operations_bonus.c \
src/rotation_bonus.c \
src/rotation2_bonus.c \
src/rotation3_bonus.c \
src/input_bonus.c \
src/opacity_bonus.c


OBJECTS = $(CFILES:.c=.o)

all: fdf

install: install_brew install_glfw

install_brew:
	rm -r $HOME/.brew && rm -rf $HOME/goinfre/.brew && \
	git clone --depth=1 https://github.com/Homebrew/brew $HOME/goinfre/.brew && \
	echo 'export PATH=$HOME/goinfre/.brew/bin:$PATH' >> $HOME/.zshrc && \
	source $HOME/.zshrc && brew update \

install_glfw:
	brew install glfw

bonus: fdf

fdf: libmlx42.a $(OBJECTS)
	make -C libft
	cp libft/libft.a ./
	cc -Wall -Wextra -Werror $(OBJECTS) -lm -L. -lft -lmlx42 -lglfw -framework Cocoa -framework OpenGL -framework IOKit -o fdf 

libmlx42.a: 
	mkdir lib && cd lib && git clone https://github.com/codam-coding-college/MLX42.git
	cd lib/MLX42 && cmake -B build && cmake --build build -j4
	cp lib/MLX42/build/libmlx42.a ./

clean:
	make -C libft clean
	rm -f $(OBJECTS)
	rm -rf ./lib/

fclean: clean
	make -C libft fclean
	rm -f libft.a
	rm -f libmlx42.a
	rm -f fdf